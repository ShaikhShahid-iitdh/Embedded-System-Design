<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Register File -->
  <rect x="50" y="100" width="120" height="200" fill="#e6f3ff" stroke="#333" stroke-width="2"/>
  <text x="110" y="90" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Register File</text>
  <text x="110" y="115" text-anchor="middle" font-family="Arial" font-size="10">16 x 16-bit</text>
  <text x="110" y="130" text-anchor="middle" font-family="Arial" font-size="10">Registers</text>
  <text x="110" y="145" text-anchor="middle" font-family="Arial" font-size="10">(R0-R15)</text>
  
  <!-- Register address inputs -->
  <text x="25" y="180" font-family="Arial" font-size="10">Rs (4-bit)</text>
  <line x1="45" y1="175" x2="50" y2="175" stroke="#333" stroke-width="2"/>
  <text x="25" y="200" font-family="Arial" font-size="10">Rt (4-bit)</text>
  <line x1="45" y1="195" x2="50" y2="195" stroke="#333" stroke-width="2"/>
  <text x="25" y="220" font-family="Arial" font-size="10">Rd (4-bit)</text>
  <line x1="45" y1="215" x2="50" y2="215" stroke="#333" stroke-width="2"/>
  
  <!-- Data outputs from register file -->
  <line x1="170" y1="160" x2="220" y2="160" stroke="#333" stroke-width="3"/>
  <text x="190" y="155" font-family="Arial" font-size="10">16-bit</text>
  <line x1="170" y1="200" x2="220" y2="200" stroke="#333" stroke-width="3"/>
  <text x="190" y="195" font-family="Arial" font-size="10">16-bit</text>
  
  <!-- MUX A (Source A selection) -->
  <polygon points="220,140 260,140 250,180 230,180" fill="#ffeecc" stroke="#333" stroke-width="2"/>
  <text x="245" y="125" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold">MUX A</text>
  <text x="245" y="165" text-anchor="middle" font-family="Arial" font-size="8">4:1</text>
  
  <!-- MUX B (Source B selection) -->
  <polygon points="220,220 260,220 250,260 230,260" fill="#ffeecc" stroke="#333" stroke-width="2"/>
  <text x="245" y="210" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold">MUX B</text>
  <text x="245" y="245" text-anchor="middle" font-family="Arial" font-size="8">4:1</text>
  
  <!-- Additional inputs to MUXes -->
  <line x1="200" y1="150" x2="220" y2="150" stroke="#333" stroke-width="2"/>
  <text x="190" y="145" font-family="Arial" font-size="8">Immediate</text>
  <line x1="200" y1="170" x2="220" y2="170" stroke="#333" stroke-width="2"/>
  <text x="185" y="175" font-family="Arial" font-size="8">PC</text>
  
  <line x1="200" y1="230" x2="220" y2="230" stroke="#333" stroke-width="2"/>
  <text x="190" y="225" font-family="Arial" font-size="8">Immediate</text>
  <line x1="200" y1="250" x2="220" y2="250" stroke="#333" stroke-width="2"/>
  <text x="190" y="255" font-family="Arial" font-size="8">Constant</text>
  
  <!-- MUX control signals -->
  <line x1="240" y1="180" x2="240" y2="190" stroke="#333" stroke-width="1"/>
  <text x="245" y="200" font-family="Arial" font-size="8">Sel A</text>
  <line x1="240" y1="260" x2="240" y2="270" stroke="#333" stroke-width="1"/>
  <text x="245" y="280" font-family="Arial" font-size="8">Sel B</text>
  
  <!-- ALU -->
  <rect x="300" y="180" width="100" height="80" fill="#ffe6e6" stroke="#333" stroke-width="3"/>
  <text x="350" y="200" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">16-bit ALU</text>
  <text x="350" y="215" text-anchor="middle" font-family="Arial" font-size="10">16 Operations</text>
  <text x="350" y="230" text-anchor="middle" font-family="Arial" font-size="10">ADD, SUB, AND</text>
  <text x="350" y="245" text-anchor="middle" font-family="Arial" font-size="10">OR, XOR, SHL, etc.</text>
  
  <!-- Connections to ALU -->
  <line x1="250" y1="160" x2="290" y2="160" stroke="#333" stroke-width="3"/>
  <line x1="290" y1="160" x2="290" y2="195" stroke="#333" stroke-width="3"/>
  <line x1="290" y1="195" x2="300" y2="195" stroke="#333" stroke-width="3"/>
  <text x="275" y="155" font-family="Arial" font-size="10">A (16-bit)</text>
  
  <line x1="250" y1="240" x2="280" y2="240" stroke="#333" stroke-width="3"/>
  <line x1="280" y1="240" x2="280" y2="225" stroke="#333" stroke-width="3"/>
  <line x1="280" y1="225" x2="300" y2="225" stroke="#333" stroke-width="3"/>
  <text x="275" y="235" font-family="Arial" font-size="10">B (16-bit)</text>
  
  <!-- ALU Operation control -->
  <line x1="350" y1="180" x2="350" y2="160" stroke="#333" stroke-width="2"/>
  <text x="320" y="155" font-family="Arial" font-size="10">ALU Op (4-bit)</text>
  
  <!-- ALU Output -->
  <line x1="400" y1="220" x2="450" y2="220" stroke="#333" stroke-width="3"/>
  <text x="420" y="215" font-family="Arial" font-size="10">Result (16-bit)</text>
  
  <!-- Output MUX (Write-back selection) -->
  <polygon points="450,200 490,200 480,240 460,240" fill="#e6ffe6" stroke="#333" stroke-width="2"/>
  <text x="470" y="190" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold">MUX WB</text>
  <text x="470" y="225" text-anchor="middle" font-family="Arial" font-size="8">2:1</text>
  
  <!-- Memory data input -->
  <line x1="430" y1="230" x2="450" y2="230" stroke="#333" stroke-width="2"/>
  <text x="420" y="245" font-family="Arial" font-size="8">Mem Data</text>
  
  <!-- Write-back to register file -->
  <line x1="480" y1="220" x2="520" y2="220" stroke="#333" stroke-width="3"/>
  <line x1="520" y1="220" x2="520" y2="350" stroke="#333" stroke-width="3"/>
  <line x1="520" y1="350" x2="110" y2="350" stroke="#333" stroke-width="3"/>
  <line x1="110" y1="350" x2="110" y2="300" stroke="#333" stroke-width="3"/>
  <text x="525" y="235" font-family="Arial" font-size="10">Write Data</text>
  
  <!-- Write Enable -->
  <line x1="125" y1="300" x2="125" y2="320" stroke="#333" stroke-width="1"/>
  <text x="110" y="335" font-family="Arial" font-size="8">Write Enable</text>
  
  <!-- Instruction Format -->
  <rect x="550" y="50" width="220" height="300" fill="#f0f0f0" stroke="#333" stroke-width="2"/>
  <text x="660" y="40" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">Instruction Format</text>
  
  <!-- Instruction width calculation -->
  <text x="560" y="70" font-family="Arial" font-size="11" font-weight="bold">Instruction Width: 16 bits</text>
  
  <!-- Bit allocation -->
  <rect x="560" y="90" width="200" height="30" fill="white" stroke="#333" stroke-width="1"/>
  <line x1="610" y1="90" x2="610" y2="120" stroke="#333" stroke-width="1"/>
  <line x1="660" y1="90" x2="660" y2="120" stroke="#333" stroke-width="1"/>
  <line x1="710" y1="90" x2="710" y2="120" stroke="#333" stroke-width="1"/>
  
  <text x="585" y="110" text-anchor="middle" font-family="Arial" font-size="9">15-12</text>
  <text x="635" y="110" text-anchor="middle" font-family="Arial" font-size="9">11-8</text>
  <text x="685" y="110" text-anchor="middle" font-family="Arial" font-size="9">7-4</text>
  <text x="735" y="110" text-anchor="middle" font-family="Arial" font-size="9">3-0</text>
  
  <text x="585" y="135" text-anchor="middle" font-family="Arial" font-size="9">ALU Op</text>
  <text x="635" y="135" text-anchor="middle" font-family="Arial" font-size="9">Rs</text>
  <text x="685" y="135" text-anchor="middle" font-family="Arial" font-size="9">Rt</text>
  <text x="735" y="135" text-anchor="middle" font-family="Arial" font-size="9">Rd</text>
  
  <text x="585" y="150" text-anchor="middle" font-family="Arial" font-size="9">(4 bits)</text>
  <text x="635" y="150" text-anchor="middle" font-family="Arial" font-size="9">(4 bits)</text>
  <text x="685" y="150" text-anchor="middle" font-family="Arial" font-size="9">(4 bits)</text>
  <text x="735" y="150" text-anchor="middle" font-family="Arial" font-size="9">(4 bits)</text>
  
  <!-- Encoding explanation -->
  <text x="560" y="180" font-family="Arial" font-size="11" font-weight="bold">Bit Encoding:</text>
  <text x="560" y="200" font-family="Arial" font-size="10">• ALU Op (4 bits): Selects 1 of 16 operations</text>
  <text x="560" y="215" font-family="Arial" font-size="10">• Rs (4 bits): Source register 1 (R0-R15)</text>
  <text x="560" y="230" font-family="Arial" font-size="10">• Rt (4 bits): Source register 2 (R0-R15)</text>
  <text x="560" y="245" font-family="Arial" font-size="10">• Rd (4 bits): Destination register (R0-R15)</text>
  
  <text x="560" y="270" font-family="Arial" font-size="11" font-weight="bold">Example Operations:</text>
  <text x="560" y="285" font-family="Arial" font-size="9">0000: ADD    0100: AND    1000: SHL</text>
  <text x="560" y="300" font-family="Arial" font-size="9">0001: SUB    0101: OR     1001: SHR</text>
  <text x="560" y="315" font-family="Arial" font-size="9">0010: MUL    0110: XOR    1010: ROL</text>
  <text x="560" y="330" font-family="Arial" font-size="9">0011: DIV    0111: NOT    1011: ROR</text>
  
  <!-- Status flags -->
  <line x1="350" y1="260" x2="350" y2="290" stroke="#333" stroke-width="2"/>
  <text x="320" y="305" font-family="Arial" font-size="10">Status Flags</text>
  <text x="315" y="320" font-family="Arial" font-size="9">(Z, N, C, V)</text>
  
  <!-- Title -->
  <text x="400" y="25" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold">16-bit ALU Architecture with Register File</text>
</svg>